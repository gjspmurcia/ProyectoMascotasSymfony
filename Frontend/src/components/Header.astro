---

---

<div class="bg-gradient-to-br from-teal-600 to-[#146d6f] p-4 md:px-10 text-white flex items-center justify-between shadow-xl/30">
    <div class="flex items-center mx-2 md:mx-8">
        <img class="max-h-9 md:max-h-10 mx-2" src="/logoMiHuella.png" alt="Logo" />
        <img class="max-h-9.5 md:max-h-10 mx-2" src="/miHuella.png" alt="MiHuellaQR" />
    </div>
    

    <!-- Botón hamburguesa (visible solo en móvil) -->
    <button id="menu-toggle" class="md:hidden flex flex-col justify-center items-center w-11 h-12 bg-white">
        <span class="h-[3px] w-6 bg-white mb-1.5 transition-all rounded"></span>
        <span class="h-[3px] w-6 bg-white mb-1.5 transition-all rounded"></span>
        <span class="h-[3px] w-6 bg-white transition-all rounded"></span>
    </button>
    
    <!-- Menú de navegación (oculto en móvil, desplegado en desktop) -->
    <div id="menu-items" class="hidden md:flex absolute md:relative top-24 md:top-0 left-0 md:left-auto w-full md:w-auto 
                              bg-slate-700 md:bg-transparent md:shadow-none
                              p-4  md:p-0 shadow-md z-50 md:z-auto
                              flex-col md:flex-row justify-center">
        <a class="m-3 py-1 md:py-0 md:px-1 hover:text-teal-200 hover:border-b-[2px] border-teal-200 md:border-0" href="/">Inicio</a>
        <a class="m-3 py-1 md:py-0 md:px-1 hover:text-teal-200 hover:border-b-[2px] border-teal-200 md:border-0" href="/blog">Blog</a>
        <a class="m-3 py-1 md:py-0 md:px-1 hover:text-teal-200 hover:border-b-[2px] border-teal-200 md:border-0" href="/faq">Preguntas frecuentes</a>
        
        <a id="botonRegistro" class="m-3 py-1 md:py-0 md:px-1 hover:text-teal-200 hover:border-b-[2px] border-teal-200 md:border-0" href="/registro">Registro</a>
        <a id="botonLog" class="m-3 py-1 md:py-0 md:px-1 hover:text-teal-200 hover:border-b-[2px] border-teal-200 md:border-0" href="">Login</a>
        <a id="botonMiPerfil" class="m-3 py-1 md:py-0 md:px-1 hover:text-teal-200 hover:border-b-[2px] border-teal-200 md:border-0 hidden" href="/mi-perfil">Mi perfil</a>
    </div>
 
</div>

<script>
  const botonLog = document.getElementById("botonLog");
  const botonMiPerfil = document.getElementById("botonMiPerfil");
  const botonRegistro = document.getElementById("botonRegistro");
  const menuToggle = document.getElementById("menu-toggle");
  const menuItems = document.getElementById("menu-items");

  // Control del menú hamburguesa
  menuToggle?.addEventListener("click", () => {
    menuItems?.classList.toggle("hidden");
    
    // Animar líneas del botón hamburguesa para formar una X
    const spans = menuToggle.querySelectorAll("span");
    if (spans.length >= 3) {
      spans[0].classList.toggle("rotate-45");
      spans[0].classList.toggle("translate-y-[10px]");
      spans[1].classList.toggle("opacity-0");
      spans[2].classList.toggle("-rotate-45");
      spans[2].classList.toggle("-translate-y-[10px]");
    }
  });

  // Cerrar el menú al hacer clic en un enlace (solo en móvil)
  const links = menuItems?.querySelectorAll("a");
  if (window.innerWidth < 768) {
    links?.forEach(link => {
      link.addEventListener("click", () => {
        menuItems.classList.add("hidden");
        
        // Restaurar el botón hamburguesa
        const spans = menuToggle.querySelectorAll("span");
        if (spans.length >= 3) {
          spans[0].classList.remove("rotate-45", "translate-y-2");
          spans[1].classList.remove("opacity-0");
          spans[2].classList.remove("-rotate-45", "-translate-y-2");
        }
      });
    });
  }

  async function comprobarLogin() {
    try {
      const response = await fetch(`${import.meta.env.PUBLIC_API_URL}/api/mi_perfil`, {
        method: "GET",
        credentials: "include",
      });
      return response.ok;
    } catch (error) {
      console.error("Error al verificar usuario:", error);
      return false;
    }
  }   
          
  async function actualizarBotonLogin() {
    const isLogged = await comprobarLogin();
    if (isLogged) {
      botonMiPerfil?.classList.remove("hidden");
      botonRegistro?.classList.add("hidden");
      botonLog.textContent = "Logout";
      botonLog.setAttribute("href", "/logout");
      botonLog.classList.add("bg-amber-600", "px-2", "py-1", "rounded");
    } else {
      botonLog.textContent = "Login";
      botonLog.setAttribute("href", "/login");
      botonLog.classList.remove("bg-amber-600", "px-4", "py-1", "rounded");
    }
  }
  
  document.addEventListener('DOMContentLoaded', actualizarBotonLogin);
</script>